<% content_for :title, @link.title %>
<div class="page">
  <% if notice.present? %>
    <p class="flash flash--notice"><%= notice %></p>
  <% end %>
  <header class="page-header">
    <h1 class="page-title"><%= @link.title %></h1>
    <div class="page-actions">
      <%= link_to "Visit link", @link.url, target: "_blank", rel: "noopener", class: "btn btn--primary" %>
      <% if @link.user == current_user %>
        <%= link_to "Edit", edit_link_path(@link), class: "btn btn--ghost" %>
        <%= button_to "Delete", @link, method: :delete, data: { turbo_confirm: "Are you sure?" }, form: { class: "inline-form" }, class: "btn btn--danger" %>
      <% end %>
    </div>
  </header>
  <div class="link-detail card">
    <p class="link-detail__url">
      <%= link_to @link.url, @link.url, target: "_blank", rel: "noopener", class: "link-detail__url-link" %>
    </p>
  </div>
  <section class="comments">
    <div class="comments__header">
      <h2 class="comments__title">Comments</h2>
      <%= link_to "Add comment", new_link_comment_path(@link), class: "btn btn--primary" %>
    </div>
    <% if @link.comments.any? %>
      <ul class="comments-list">
        <% @link.comments.each do |comment| %>
          <li><%= render comment %></li>
        <% end %>
      </ul>
    <% else %>
      <p class="comments__empty">No comments yet. Be the first to add one!</p>
    <% end %>
  </section>
  <div class="page-footer">
    <%= link_to "â† Back to links", links_path, class: "btn btn--ghost" %>
  </div>
</div>
